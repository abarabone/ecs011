#pragma kernel CSMain

AppendStructuredBuffer<uint> cube_instances;


uint toCubeInstance(int ix, int iy, int iz, int gridId, uint cubeId)
{
    return (uint)iz << 26 | (uint)iy << 21 | (uint)ix << 16 | (uint)gridId << 8 | cubeId;
}

[numthreads(32, 1, 32)]
void CSMain (uint3 id : SV_DispatchThreadID)
{
	const uint cube = toCubeInstance(id.x, id.y, id.z, 0, 100);
	cube_instances.Append(cube);
}
